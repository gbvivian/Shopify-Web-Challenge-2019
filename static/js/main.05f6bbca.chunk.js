(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(21)},16:function(e,t,a){},18:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),o=a.n(i),s=(a(16),a(8)),c=a(9),l=a(1),u=a(2),d=a(4),m=a(3),h=a(5),v=(a(18),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this))).handleSubmit=function(e){e.preventDefault(),a.props.onSearch(a.state.userInput)},a.handleChange=function(e){a.setState({userInput:e.target.value})},a.state={userInput:"rope"},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{className:"Search-bar",type:"text",placeholder:"Search for something",value:this.state.userInput,onChange:this.handleChange}),r.a.createElement("input",{type:"submit"})))}}]),t}(n.Component)),f=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){console.log("this is the event:",e.target),a.props.onClickHandler(!a.props.isFavourited)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"checkbox",id:"c1",name:"cc",checked:this.props.isFavourited,onChange:this.handleClick}),r.a.createElement("label",{for:"c1"},r.a.createElement("span",{className:"star-five"})))}}]),t}(n.Component),p=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).setFavouriteState=function(e){a.props.handleFavourite(e,{isFavourited:e,title:a.props.itemName,body:a.props.itemDesc})},a.decodeHTML=function(e){return(new DOMParser).parseFromString(e,"text/html").body.innerText},console.log(e),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Item"},r.a.createElement(f,{isFavourited:this.props.isFavourited,onClickHandler:this.setFavouriteState}),r.a.createElement("div",{className:"item1"},this.props.itemName),r.a.createElement("div",{className:"desc",dangerouslySetInnerHTML:{__html:this.decodeHTML(this.props.itemDesc)}}))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getData=function(){return fetch("https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000").then(function(e){return e.json()})},a.handleSearch=function(e){a.getData().then(function(t){var n=t.filter(function(t){return t.keywords.includes(e)});n=n.map(function(e){return Object(c.a)({},e,{isFavourited:a.isFavourited(e)})}),a.setState({filteredItems:n})})},a.isFavourited=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=a.state.favourites[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(e.title===s.title)return!0}}catch(c){n=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},a.containsKeyword=function(e,t){return t.split(", ").includes(e)},a.handleFavourite=function(e,t){console.log("handleFavourite called"),console.log(e),console.log(t),e?a.addToFavourites(t):a.removeFromFavourites(t)},a.addToFavourites=function(e){var t=a.state.filteredItems,n=!0,r=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;e.title===l.title&&(l.isFavourited=!0)}}catch(u){r=!0,i=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}a.setState({favourites:[].concat(Object(s.a)(a.state.favourites),[e]),filteredItemList:t})},a.removeFromFavourites=function(e){var t=a.state.filteredItems,n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;e.title===c.title&&(c.isFavourited=!1)}}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}a.setState({favourites:a.state.favourites.filter(function(t){return t.title!==e.title}),filteredItemList:t})},a.state={isLoading:!0,filteredItems:[],favourites:[]},a.getData(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"Toronto Waste Lookup"),r.a.createElement(v,{onSearch:this.handleSearch}),this.state.filteredItems.map(function(t,a){return r.a.createElement(p,{key:a,isFavourited:t.isFavourited,itemName:t.title,itemDesc:t.body,handleFavourite:e.handleFavourite})}),r.a.createElement("div",null,"Favourites"),this.state.favourites.map(function(t,a){return r.a.createElement(p,{key:a,isFavourited:t.isFavourited,itemName:t.title,itemDesc:t.body,handleFavourite:e.handleFavourite})}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.05f6bbca.chunk.js.map