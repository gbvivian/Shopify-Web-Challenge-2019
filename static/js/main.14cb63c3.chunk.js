(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(21)},16:function(e,t,a){},18:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(7),o=a.n(i),s=(a(16),a(8)),l=a(9),c=a(1),u=a(2),m=a(4),d=a(3),h=a(5),v=(a(18),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.onSearch(a.state.userInput)},a.handleChange=function(e){a.setState({userInput:e.target.value}),""===e.target.value&&a.props.onEmptyInput()},a.state={userInput:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"d-flex bd-highlight",onSubmit:this.handleSubmit},n.a.createElement("input",{className:"Search-bar mr-3 from-control",type:"text",placeholder:"Search proper disposal",value:this.state.userInput,onChange:this.handleChange}),n.a.createElement("span",{className:"input-group-append"},n.a.createElement("button",{className:"btn btn-outline-success",type:"submit"},n.a.createElement("i",{className:"fa fa-search fa-flip-horizontal"})))))}}]),t}(r.Component));function f(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var p=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(e){a.props.onClickHandler(!a.props.isFavourited)},a.state={id:f()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{type:"checkbox",id:this.state.id,name:"cc",checked:this.props.isFavourited,onChange:this.handleClick}),n.a.createElement("label",{htmlFor:this.state.id},n.a.createElement("span",{className:"star-five"})))}}]),t}(r.Component),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).setFavouriteState=function(e){a.props.handleFavourite(e,{isFavourited:e,title:a.props.itemName,body:a.props.itemDesc})},a.decodeHTML=function(e){return(new DOMParser).parseFromString(e,"text/html").body.innerText},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"d-flex flex-row bd-highlight"},n.a.createElement("div",{className:"p-2 bd-highlight"},n.a.createElement(p,{isFavourited:this.props.isFavourited,onClickHandler:this.setFavouriteState})),n.a.createElement("div",{className:"item-title p-2 bd-highlight"},this.props.itemName),n.a.createElement("div",{className:"item-desc p-2 bd-highlight",dangerouslySetInnerHTML:{__html:this.decodeHTML(this.props.itemDesc)}}))}}]),t}(r.Component),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).getTorontoWasteData=function(){return fetch("https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000").then(function(e){return e.json()})},a.handleSearch=function(e){a.getTorontoWasteData().then(function(t){var r=t.filter(function(t){return t.keywords.includes(e)});r=r.map(function(e){return Object(l.a)({},e,{isFavourited:a.isFavourited(e)})}),a.setState({filteredItems:r})})},a.isFavourited=function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=a.state.favourites[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(e.title===s.title)return!0}}catch(l){r=!0,n=l}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return!1},a.containsKeyword=function(e,t){return t.split(", ").includes(e)},a.handleFavourite=function(e,t){e?a.addToFavourites(t):a.removeFromFavourites(t)},a.addToFavourites=function(e){var t=a.state.filteredItems,r=!0,n=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var c=o.value;e.title===c.title&&(c.isFavourited=!0)}}catch(u){n=!0,i=u}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}a.setState({favourites:[].concat(Object(s.a)(a.state.favourites),[e]),filteredItemList:t})},a.removeFromFavourites=function(e){var t=a.state.filteredItems,r=!0,n=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;e.title===l.title&&(l.isFavourited=!1)}}catch(c){n=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}a.setState({favourites:a.state.favourites.filter(function(t){return t.title!==e.title}),filteredItems:t})},a.clearFilteredItems=function(){a.setState({filteredItems:[]})},a.state={filteredItems:[],favourites:[]},a.getTorontoWasteData(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=n.a.createElement("div",{className:"mt-5 mx-3"},this.state.filteredItems.map(function(t,a){return n.a.createElement(b,{key:a,isFavourited:t.isFavourited,itemName:t.title,itemDesc:t.body,handleFavourite:e.handleFavourite})})),a=this.state.favourites.length>0&&n.a.createElement("div",{className:"mt-5 px-3 favourites-container"},n.a.createElement("h1",{className:"favourites-title"},"Favourites"),this.state.favourites.map(function(t,a){return n.a.createElement(b,{key:a,isFavourited:t.isFavourited,itemName:t.title,itemDesc:t.body,handleFavourite:e.handleFavourite})}));return n.a.createElement("div",null,n.a.createElement("header",{className:"App-header"},"Toronto Waste Lookup"),n.a.createElement("div",{className:"mt-3 mx-3"},n.a.createElement(v,{onSearch:this.handleSearch,onEmptyInput:this.clearFilteredItems})),t,a)}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.14cb63c3.chunk.js.map